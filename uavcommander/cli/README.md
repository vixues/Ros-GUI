# CLI æ¨¡å—

> ðŸ’» UAV Commander å‘½ä»¤è¡ŒæŽ¥å£

æœ¬æ¨¡å—æä¾› UAV Commander çš„å‘½ä»¤è¡Œäº¤äº’ç•Œé¢ã€‚

## ðŸ“ æ¨¡å—ç»“æž„

```
cli/
â”œâ”€â”€ __init__.py          # æ¨¡å—å¯¼å‡º
â”œâ”€â”€ main.py              # CLI å…¥å£
â”œâ”€â”€ repl.py              # äº¤äº’å¼ REPL
â”œâ”€â”€ commands.py          # å†…ç½®å‘½ä»¤
â””â”€â”€ README.md            # æœ¬æ–‡æ¡£
```

## ðŸš€ å¿«é€Ÿå¼€å§‹

### å¯åŠ¨äº¤äº’å¼ç•Œé¢

```bash
python -m cli.main
```

### å‘½ä»¤è¡Œå‚æ•°

```bash
python -m cli.main [é€‰é¡¹]

é€‰é¡¹:
  -m, --model MODEL       ä½¿ç”¨çš„ LLM æ¨¡åž‹ (é»˜è®¤: gpt-4)
  --approval-mode MODE    å®¡æ‰¹æ¨¡å¼: strict/normal/yolo
  --simulation            ä»¿çœŸæ¨¡å¼
  --debug                 è°ƒè¯•æ¨¡å¼
  -c, --command CMD       ç›´æŽ¥æ‰§è¡Œå‘½ä»¤ï¼ˆéžäº¤äº’ï¼‰
  --no-stream             ç¦ç”¨æµå¼è¾“å‡º
```

### ç¤ºä¾‹

```bash
# ä½¿ç”¨ GPT-4 å¯åŠ¨
python -m cli.main -m gpt-4

# ä»¿çœŸæ¨¡å¼ + YOLO å®¡æ‰¹
python -m cli.main --simulation --approval-mode yolo

# æ‰§è¡Œå•ä¸ªå‘½ä»¤
python -m cli.main -c "è®©3æž¶æ— äººæœºèµ·é£ž"
```

## ðŸŽ¯ äº¤äº’å¼å‘½ä»¤

### å†…ç½®å‘½ä»¤

| å‘½ä»¤ | åˆ«å | æè¿° |
|------|------|------|
| `help` | `h`, `?` | æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯ |
| `exit` | `quit`, `q` | é€€å‡ºç¨‹åº |
| `status` | `st` | æ˜¾ç¤ºç³»ç»ŸçŠ¶æ€ |
| `tools` | `t` | åˆ—å‡ºå¯ç”¨å·¥å…· |
| `agents` | `a` | åˆ—å‡ºå¯ç”¨ä»£ç† |
| `mode` | `m` | åˆ‡æ¢å®¡æ‰¹æ¨¡å¼ |
| `clear` | `cls` | æ¸…é™¤å±å¹• |

### è‡ªç„¶è¯­è¨€å‘½ä»¤

ç›´æŽ¥è¾“å…¥è‡ªç„¶è¯­è¨€æŒ‡ä»¤ï¼š

```
>>> è®©3æž¶æ— äººæœºèµ·é£žåˆ°50ç±³é«˜åº¦
ðŸš€ æ‰§è¡Œä¸­...
âœ… uav_1 èµ·é£žä¸­ â†’ 50m
âœ… uav_2 èµ·é£žä¸­ â†’ 50m
âœ… uav_3 èµ·é£žä¸­ â†’ 50m
å·²ä¸º 3 æž¶æ— äººæœºå‘é€èµ·é£žæŒ‡ä»¤ã€‚

>>> å»ºç«‹Vå½¢ç¼–é˜Ÿé£žå¾€æ“åœºä¸­å¿ƒ
ðŸ“ v_shape ç¼–é˜Ÿå»ºç«‹: 3 æž¶æ— äººæœº
âœˆï¸ ç¼–é˜Ÿé£žè¡Œä¸­...

>>> æŸ¥çœ‹æ— äººæœºçŠ¶æ€
ðŸ“Š uav_1: ðŸŸ¢ GUIDED 85%
ðŸ“Š uav_2: ðŸŸ¢ GUIDED 82%
ðŸ“Š uav_3: ðŸŸ¢ GUIDED 88%
```

## ðŸ”§ å·¥å…·ç¡®è®¤

å½“æ‰§è¡Œå±é™©æ“ä½œæ—¶ï¼Œç³»ç»Ÿä¼šè¯·æ±‚ç¡®è®¤ï¼š

```
>>> è®©æ— äººæœºuav_1èµ·é£ž

âš ï¸ æ“ä½œéœ€è¦ç¡®è®¤:
   å·¥å…·: device_tool.takeoff
   å‚æ•°: {'uav_id': 'uav_1', 'altitude': 50}
[ç¡®è®¤] (y/n/a) >>> y

âœ… uav_1 èµ·é£žä¸­ â†’ 50m
```

ç¡®è®¤é€‰é¡¹ï¼š
- `y` - ç¡®è®¤æ‰§è¡Œ
- `n` - å–æ¶ˆ
- `a` - æ€»æ˜¯ç¡®è®¤ï¼ˆæœ¬æ¬¡ä¼šè¯ï¼‰

## ðŸ“Š å®¡æ‰¹æ¨¡å¼

| æ¨¡å¼ | æè¿° |
|------|------|
| `strict` | æ‰€æœ‰æ“ä½œéœ€ç¡®è®¤ |
| `normal` | ä»…å±é™©æ“ä½œéœ€ç¡®è®¤ï¼ˆé»˜è®¤ï¼‰ |
| `yolo` | è‡ªåŠ¨æ‰¹å‡†æ‰€æœ‰ï¼ˆä»…é™ä»¿çœŸï¼‰ |

åˆ‡æ¢æ¨¡å¼ï¼š
```
>>> mode yolo
å®¡æ‰¹æ¨¡å¼å·²åˆ‡æ¢ä¸º: yolo
```

## ðŸŽ¨ ç•Œé¢è¯´æ˜Ž

### çŠ¶æ€å›¾æ ‡

| å›¾æ ‡ | å«ä¹‰ |
|------|------|
| ðŸš€ | æ­£åœ¨æ‰§è¡Œ |
| âœ… | æˆåŠŸ |
| âŒ | å¤±è´¥ |
| âš ï¸ | è­¦å‘Š/éœ€ç¡®è®¤ |
| ðŸ’­ | æ€è€ƒä¸­ |
| ðŸ“Š | çŠ¶æ€ä¿¡æ¯ |
| ðŸ“ | ç¼–é˜Ÿæ“ä½œ |
| âœˆï¸ | é£žè¡Œæ“ä½œ |
| ðŸ”‹ | ç”µæ± ä¿¡æ¯ |

### æµå¼è¾“å‡º

å¯ç”¨æµå¼è¾“å‡ºæ—¶ï¼ŒLLM å“åº”ä¼šå®žæ—¶æ˜¾ç¤ºï¼š

```
>>> è§£é‡ŠVå½¢ç¼–é˜Ÿçš„ä¼˜åŠ¿

ðŸ’­ åˆ†æžç¼–é˜Ÿç‰¹ç‚¹...

Vå½¢ç¼–é˜Ÿæ˜¯ä¸€ç§ç»å…¸çš„é£žè¡Œç¼–é˜Ÿå½¢å¼ï¼Œå…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š

1. **ç©ºæ°”åŠ¨åŠ›å­¦æ•ˆçŽ‡**: è·Ÿéšæœºå¯ä»¥åˆ©ç”¨å‰æ–¹æ— äººæœºäº§ç”Ÿçš„ä¸Šå‡æ°”æµ...
2. **è§†é‡Žè¦†ç›–**: æ¯æž¶æ— äººæœºéƒ½æœ‰è‰¯å¥½çš„å‰å‘è§†é‡Ž...
3. **é€šä¿¡å¯é **: ç¼–é˜Ÿç»“æž„æœ‰åˆ©äºŽä¿æŒé€šä¿¡é“¾è·¯...
```

## ðŸ’¡ ä½¿ç”¨æŠ€å·§

1. **Tab è¡¥å…¨**: æ”¯æŒå‘½ä»¤è‡ªåŠ¨è¡¥å…¨ï¼ˆéœ€è¦ readlineï¼‰
2. **åŽ†å²è®°å½•**: ä½¿ç”¨ä¸Šä¸‹ç®­å¤´æµè§ˆåŽ†å²å‘½ä»¤
3. **ä¸­æ–­æ‰§è¡Œ**: Ctrl+C ä¸­æ–­å½“å‰æ‰§è¡Œ
4. **å¿«é€Ÿé€€å‡º**: Ctrl+D æˆ–è¾“å…¥ `exit`

## âš™ï¸ é…ç½®

### çŽ¯å¢ƒå˜é‡

```bash
# LLM é…ç½®
export OPENAI_API_KEY=sk-xxx
export UAV_DEFAULT_MODEL=gpt-4

# è¿è¡Œé…ç½®
export UAV_ENVIRONMENT=simulation
export UAV_APPROVAL_MODE=yolo
```

### REPL é…ç½®

```python
from cli import REPL, REPLConfig

config = REPLConfig(
    prompt="UAV> ",
    stream_enabled=True,
    welcome_message="æ¬¢è¿Žä½¿ç”¨ UAV Commander!",
)

repl = REPL(app_config, repl_config=config)
await repl.run()
```

